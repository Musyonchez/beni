# 5.9 Requirements Specification

The requirements specification formalizes all functional and non-functional requirements guiding system development and providing measurable criteria for acceptance testing. Requirements are categorized, assigned unique identifiers for traceability, and prioritized using the MoSCoW method (Must have, Should have, Could have, Won't have). This structured approach ensures comprehensive coverage of system capabilities while maintaining clear scope boundaries preventing feature creep.

## Functional Requirements

Functional requirements define specific behaviors and features the system must provide. Each requirement is stated as "The system shall..." to emphasize obligation rather than aspiration.

### Authentication and User Management (FR1-FR5)

**FR1: User Registration**  
*Priority*: Must Have  
*Description*: The system shall allow new users to register accounts by providing name, email, phone number, and password. The system shall validate email format uniqueness, phone number format (+254 Kenyan format), and password strength (minimum 8 characters with at least one number). Upon successful registration, the system shall send email verification and create user record with zero initial loyalty points.

**FR2: User Login**  
*Priority*: Must Have  
*Description*: The system shall authenticate users via email and password using Firebase Authentication. The system shall validate credentials, generate JWT session tokens, and persist login state across app restarts. The system shall limit failed login attempts to 3 consecutive failures before implementing 15-minute account lockout.

**FR3: Password Reset**  
*Priority*: Must Have  
*Description*: The system shall provide password reset functionality via email. When users request password reset, the system shall send a secure reset link to the registered email address that expires after 1 hour.

**FR4: Profile Management**  
*Priority*: Should Have  
*Description*: The system shall allow users to view and edit profile information including name, phone number, and profile photo. The system shall prevent email address changes to maintain account integrity. The system shall allow password changes with current password verification.

**FR5: Session Management**  
*Priority*: Must Have  
*Description*: The system shall automatically log out users after 30 days of inactivity. The system shall provide manual logout functionality. Upon logout, the system shall clear session tokens and navigate to login screen.

### Menu Browsing and Discovery (FR6-FR11)

**FR6: Menu Display**  
*Priority*: Must Have  
*Description*: The system shall display all available menu items with name, description, image, price, and preparation time. The system shall organize items by categories (breakfast, lunch, dinner, snacks, beverages). The system shall mark unavailable items clearly and prevent their ordering.

**FR7: Menu Search**  
*Priority*: Should Have  
*Description*: The system shall provide keyword search functionality across menu item names and descriptions. The system shall display search results in real-time as users type. The system shall highlight matching text in results.

**FR8: Category Filtering**  
*Priority*: Must Have  
*Description*: The system shall allow filtering menu items by category using horizontal scrolling category chips. The system shall visually indicate active filter. The system shall display item count for each category.

**FR9: Item Detail View**  
*Priority*: Must Have  
*Description*: The system shall display detailed information for selected menu items including full-size image, complete description, nutritional information (if available), allergen warnings, preparation time, and current availability status.

**FR10: Popular Items**  
*Priority*: Should Have  
*Description*: The system shall display a "Popular Items" section on the home screen showing the top 5 most frequently ordered items based on order history.

**FR11: Item Favorites**  
*Priority*: Could Have  
*Description*: The system shall allow users to mark menu items as favorites for quick access. The system shall display favorites in a dedicated section.

### Shopping Cart and Ordering (FR12-FR18)

**FR12: Add to Cart**  
*Priority*: Must Have  
*Description*: The system shall allow users to add menu items to cart specifying quantity. The system shall support quantity adjustments (increment/decrement). The system shall prevent adding unavailable items. The system shall calculate and display cart subtotal in real-time.

**FR13: Cart Management**  
*Priority*: Must Have  
*Description*: The system shall allow users to view cart contents, modify item quantities, remove items, and clear entire cart. The system shall persist cart contents across app restarts. The system shall automatically remove items marked unavailable since addition.

**FR14: Loyalty Points Redemption**  
*Priority*: Must Have  
*Description*: During checkout, the system shall display user's available loyalty points and offer redemption option (100 points = 50 KES discount). The system shall allow partial point redemption in 100-point increments. The system shall apply discount to order total and reserve redeemed points pending payment confirmation.

**FR15: Delivery Preferences**  
*Priority*: Should Have  
*Description*: The system shall allow users to specify pickup time (now, 30 minutes, 1 hour, or custom time). The system shall accept special instructions text (maximum 500 characters) for dietary restrictions or customization requests.

**FR16: Order Review**  
*Priority*: Must Have  
*Description*: Before payment, the system shall display complete order summary including all items, quantities, prices, subtotal, loyalty discount (if applied), and final total. The system shall require explicit user confirmation before proceeding to payment.

**FR17: Order Placement**  
*Priority*: Must Have  
*Description*: Upon confirmation, the system shall create order record in Firestore with status "Pending Payment". The system shall generate unique order ID. The system shall store all order details including timestamp, user information, and delivery preferences.

**FR18: Reordering**  
*Priority*: Could Have  
*Description*: The system shall allow users to reorder complete previous orders with one tap. The system shall add all items from historical order to current cart. The system shall verify all items remain available before allowing reorder.

### Payment Processing (FR19-FR22)

**FR19: M-Pesa Integration**  
*Priority*: Must Have  
*Description*: The system shall integrate M-Pesa Daraja API for payment processing. The system shall initiate STK Push sending payment prompt to user's registered phone number. The system shall support payment amounts from 10 KES to 50,000 KES.

**FR20: Payment Verification**  
*Priority*: Must Have  
*Description*: The system shall verify payment completion via M-Pesa callback. The system shall validate callback authenticity using signature verification. Upon successful payment, the system shall update order status to "Payment Confirmed" and release reserved loyalty points.

**FR21: Payment Timeout**  
*Priority*: Must Have  
*Description*: If payment does not complete within 5 minutes of order creation, the system shall automatically cancel the order and notify the user. The system shall release reserved loyalty points back to user balance.

**FR22: Payment Receipt**  
*Priority*: Should Have  
*Description*: The system shall display payment confirmation with M-Pesa transaction ID and receipt number. The system shall store payment records for user reference and admin reconciliation.

### Order Tracking (FR23-FR26)

**FR23: Real-Time Status Updates**  
*Priority*: Must Have  
*Description*: The system shall provide real-time order status tracking using Firestore snapshot listeners. The system shall display current status (Payment Confirmed → Preparing → Ready for Pickup → Completed) with visual progress indicator. The system shall show estimated ready time.

**FR24: Push Notifications**  
*Priority*: Must Have  
*Description*: The system shall send push notifications when order status changes, particularly when orders become ready for pickup. Notifications shall include order number and new status.

**FR25: Order History**  
*Priority*: Must Have  
*Description*: The system shall maintain complete order history for each user. The system shall display past orders chronologically with date, items, total, and final status. The system shall allow viewing detailed information for historical orders.

**FR26: Order Cancellation**  
*Priority*: Should Have  
*Description*: The system shall allow users to cancel orders if status is "Pending Payment" or "Payment Confirmed" (not yet preparing). The system shall refund payment if applicable and release reserved loyalty points.

### Loyalty Program (FR27-FR29)

**FR27: Points Earning**  
*Priority*: Must Have  
*Description*: The system shall automatically calculate and award loyalty points upon order completion. The system shall award 1 point per 100 KES spent (rounded down). The system shall apply promotional multipliers (2x, 3x points) when active. The system shall enforce minimum purchase threshold of 200 KES for points eligibility.

**FR28: Points Balance Display**  
*Priority*: Must Have  
*Description*: The system shall display user's current loyalty points balance on profile screen and during checkout. The system shall show redemption value (100 points = 50 KES discount).

**FR29: Points Transaction History**  
*Priority*: Should Have  
*Description*: The system shall maintain complete transaction history showing all points earned and redeemed with dates, amounts, and source orders. The system shall display running balance after each transaction.

### Administrative Functions (FR30-FR35)

**FR30: Order Queue Management**  
*Priority*: Must Have  
*Description*: The administrative dashboard shall display all active orders in chronological order with customer details, items, and elapsed time. The dashboard shall auto-refresh every 30 seconds. The dashboard shall play sound notification for new orders.

**FR31: Status Updates**  
*Priority*: Must Have  
*Description*: Staff shall be able to update order status with single-click actions. Status transitions shall trigger immediate Firestore updates and customer push notifications.

**FR32: Menu Item Management**  
*Priority*: Must Have  
*Description*: Administrators shall be able to create, edit, and delete menu items. The system shall support image upload for item photos. The system shall require confirmation before deleting items with order history.

**FR33: Inventory Management**  
*Priority*: Must Have  
*Description*: Staff shall be able to mark menu items as available/unavailable. Changes shall take effect immediately, preventing new orders for unavailable items while preserving items in existing carts.

**FR34: Analytics Dashboard**  
*Priority*: Should Have  
*Description*: Administrators shall access analytics showing daily/weekly/monthly order counts, revenue totals, popular items rankings, and peak ordering hours. The system shall display KPI cards and visualizations (charts, graphs).

**FR35: User Management**  
*Priority*: Could Have  
*Description*: Administrators shall view registered users, search by name/email, and deactivate accounts if needed. The system shall allow manual loyalty points adjustments with audit logging.

## Non-Functional Requirements

Non-functional requirements specify quality attributes, constraints, and operational characteristics.

### Performance (NFR1-NFR5)

**NFR1: App Launch Time**  
*Description*: The mobile application shall launch from tap to first interactive screen in less than 3 seconds on devices with Android 8.0+ or iOS 12+.  
*Measurement*: Automated performance testing with Firebase Performance Monitoring

**NFR2: Menu Loading Time**  
*Description*: Menu items shall load and display within 2 seconds under normal network conditions (3G or better).  
*Measurement*: API response time monitoring, 95th percentile < 2 seconds

**NFR3: Search Response Time**  
*Description*: Search results shall appear within 500 milliseconds of user input.  
*Measurement*: Client-side performance metrics

**NFR4: Payment Processing Time**  
*Description*: M-Pesa STK Push request shall complete within 10 seconds. Total payment confirmation (including user PIN entry) shall complete within 60 seconds.  
*Measurement*: Payment transaction logs from initiation to callback receipt

**NFR5: Real-Time Update Latency**  
*Description*: Order status updates shall propagate to customer apps within 2 seconds of staff action.  
*Measurement*: Firestore snapshot listener latency monitoring

### Scalability (NFR6-NFR7)

**NFR6: Concurrent Users**  
*Description*: The system shall support minimum 100 concurrent users browsing and ordering without performance degradation.  
*Measurement*: Load testing simulating 100+ simultaneous sessions

**NFR7: Database Performance**  
*Description*: Firestore queries shall maintain sub-second response times with database containing 10,000+ menu items, 50,000+ orders, and 5,000+ users.  
*Measurement*: Query performance monitoring under synthetic load

### Availability and Reliability (NFR8-NFR9)

**NFR8: System Uptime**  
*Description*: The system shall achieve 99.5% uptime during cafeteria operating hours (7 AM - 8 PM, Monday-Friday).  
*Measurement*: Uptime monitoring with status page tracking

**NFR9: Offline Functionality**  
*Description*: The mobile app shall allow menu browsing and cart preparation while offline, with synchronization occurring when connectivity resumes. The system shall display clear offline indicators.  
*Measurement*: Manual testing with network disabled

### Security (NFR10-NFR13)

**NFR10: Data Encryption**  
*Description*: All data transmission between client applications and servers shall use HTTPS/TLS 1.2 or higher encryption. Passwords shall be hashed using bcrypt with minimum 10 salt rounds.  
*Measurement*: Security audit, SSL certificate verification

**NFR11: Authentication Security**  
*Description*: Session tokens shall expire after 30 days. Failed login attempts shall trigger account lockout after 3 consecutive failures. Password reset tokens shall expire after 1 hour.  
*Measurement*: Security testing, penetration testing

**NFR12: Payment Security**  
*Description*: The system shall never store M-Pesa PIN numbers or complete transaction credentials. Payment callbacks shall be verified for authenticity before updating order status.  
*Measurement*: Code review, security audit

**NFR13: Data Privacy**  
*Description*: The system shall comply with GDPR and Kenya Data Protection Act requirements. Users shall be able to request data export and account deletion. Personal data shall not be shared with third parties without explicit consent.  
*Measurement*: Privacy policy review, compliance audit

### Usability (NFR14-NFR16)

**NFR14: User Interface Responsiveness**  
*Description*: The mobile app UI shall remain responsive with maximum 100ms delay between user input and visual feedback.  
*Measurement*: Frame rate monitoring, interaction latency testing

**NFR15: Accessibility**  
*Description*: Text shall maintain minimum 4.5:1 contrast ratio against backgrounds (WCAG AA compliance). Touch targets shall be minimum 44×44 points. Screen readers shall access all UI elements with descriptive labels.  
*Measurement*: Accessibility testing tools, manual testing with screen readers

**NFR16: Learning Curve**  
*Description*: First-time users shall be able to browse menu and place order within 3 minutes without instructions.  
*Measurement*: Usability testing with 15+ participants

### Compatibility (NFR17-NFR18)

**NFR17: Mobile Platform Support**  
*Description*: The mobile application shall support Android 8.0 (Oreo) and higher, iOS 12 and higher. The app shall function correctly on screen sizes from 4.7 inches to 7 inches.  
*Measurement*: Device testing matrix

**NFR18: Web Browser Support**  
*Description*: The administrative dashboard shall support latest versions of Chrome, Firefox, Safari, and Edge browsers.  
*Measurement*: Cross-browser testing

## Requirements Traceability Matrix

**[DIAGRAM PLACEHOLDER: Figure 5.34 - Requirements Traceability Matrix Table]**  
*A table showing:*
- *Requirement ID | Description (summary) | Priority | Category | Objective Reference (Chapter 3) | Test Case ID (Chapter 7)*
- *Sample rows:*
  - *FR1 | User Registration | Must Have | Authentication | OBJ-1 | TC-001*
  - *FR12 | Add to Cart | Must Have | Ordering | OBJ-2 | TC-015*
  - *FR19 | M-Pesa Integration | Must Have | Payment | OBJ-3 | TC-025*
  - *NFR1 | App Launch Time | Must Have | Performance | OBJ-7 | TC-045*
- *(Continue for all 35 functional and 18 non-functional requirements)*

This traceability matrix ensures every requirement maps to project objectives from Chapter 3 and will be validated through specific test cases in Chapter 7.

---

**Word Count**: ~1,220 words  
**Status**: ✅ Complete
