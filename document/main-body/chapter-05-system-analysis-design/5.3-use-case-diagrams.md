# 5.3 Use Case Diagrams

Use case diagrams provide a high-level visualization of system functionality from users' perspectives, identifying actors (entities interacting with the system) and use cases (discrete functional requirements). The Cafeteria Ordering and Loyalty Reward System serves multiple distinct actor types, each with specific interaction patterns and functional needs.

## Actors Identification

The system recognizes four primary actor categories:

1. **Student (Customer)**: The primary end-user who browses menus, places orders, makes payments, tracks deliveries, and participates in the loyalty program
2. **Cafeteria Staff**: Employees who manage daily operations including order queue monitoring, status updates, and basic inventory management
3. **System Administrator**: Personnel with comprehensive system access for menu management, user administration, analytics viewing, and system configuration
4. **Payment Gateway (M-Pesa)**: External system actor representing the M-Pesa payment infrastructure that processes financial transactions

Additionally, two secondary actors interact indirectly:

5. **Firebase Authentication Service**: External system providing identity verification and session management
6. **Firebase Cloud Messaging**: External service delivering push notifications to mobile devices

## Student Use Cases

**[DIAGRAM PLACEHOLDER: Figure 5.2 - Student Actor Use Case Diagram]**  
*A UML use case diagram showing the Student actor (stick figure on left) with connecting lines to multiple use case ovals:*
- *Register Account*
- *Login to System*
- *Browse Menu Items*
- *Search Menu*
- *Filter by Category*
- *View Item Details*
- *Add Items to Cart*
- *Modify Cart (Remove Items, Change Quantity)*
- *View Cart Summary*
- *Proceed to Checkout*
- *Enter Delivery Preferences*
- *Confirm Order*
- *Make M-Pesa Payment*
- *View Order Confirmation*
- *Track Order Status (Real-time)*
- *View Order History*
- *Reorder Previous Order*
- *View Loyalty Points Balance*
- *Redeem Loyalty Points*
- *View Points Transaction History*
- *Update Profile Information*
- *Change Password*
- *Logout*
- *Include/extend relationships showing: "Make M-Pesa Payment" extends "Confirm Order", "Search Menu" and "Filter by Category" extend "Browse Menu Items"*

### Primary Student Use Cases

**UC1: Register Account** - Students create new accounts providing name, email, phone number, and password. System validates email format and phone number format, checks for duplicate emails, sends verification email, and creates user record in Firestore with initial loyalty points balance of zero.

**UC2: Browse Menu and Place Order** - Students view categorized menu items with images, descriptions, prices, and preparation times. They can search by name, filter by category (breakfast, lunch, snacks, beverages), and view detailed nutritional information if available. Selected items add to cart with quantity specification. Cart displays running total including any applied discounts from loyalty point redemption.

**UC3: Checkout and Payment** - Students review cart contents, specify pickup time preferences, enter special instructions (dietary restrictions, extra sauce requests), and select payment method. The system initiates M-Pesa STK Push sending payment prompt to student's phone. Upon payment authorization, the system creates order record, deducts loyalty points if applied, and displays confirmation with order tracking number.

**UC4: Track Order Status** - Students monitor order preparation progress through real-time status indicators: Order Received → Payment Confirmed → Preparing → Ready for Pickup → Completed. Push notifications alert students when status changes, particularly when orders are ready. The tracking interface shows estimated pickup time and current queue position if applicable.

**UC5: Manage Loyalty Points** - Students view current points balance, earn points automatically on order completion (calculated as 1 point per 100 KES spent), review points transaction history with dates and source orders, redeem accumulated points for discounts (100 points = 50 KES discount), and see points expiration dates if expiration policy is implemented.

## Cafeteria Staff Use Cases

**[DIAGRAM PLACEHOLDER: Figure 5.3 - Cafeteria Staff Actor Use Case Diagram]**  
*A UML use case diagram showing the Cafeteria Staff actor with connections to:*
- *Login to Dashboard*
- *View Active Order Queue*
- *Sort Orders (by time, priority)*
- *View Order Details*
- *Update Order Status*
- *Mark Items as Unavailable*
- *Mark Items as Available*
- *View Daily Sales Summary*
- *Print Order Tickets*
- *Contact Customer*
- *Logout*

### Primary Staff Use Cases

**UC6: Manage Order Queue** - Staff view all pending orders in chronological order or sorted by priority (scheduled pickup time, VIP customers). Each order displays customer name, items ordered, quantities, special instructions, payment status, and elapsed time since placement. Staff can expand orders to see full details including student contact information for clarification questions.

**UC7: Update Order Status** - Staff transition orders through preparation workflow with one-tap status updates. Changing status to "Preparing" removes order from pending queue and adds to active preparation list. Marking "Ready" triggers push notification to student and moves order to pickup area queue. Completing order archives it to history and triggers loyalty points calculation.

**UC8: Manage Inventory Availability** - Staff mark menu items as unavailable when ingredients run out, preventing new orders for those items. Items marked unavailable display greyed out in student app with "Currently Unavailable" messaging. Staff can re-enable items when inventory replenishes.

## Administrator Use Cases

**[DIAGRAM PLACEHOLDER: Figure 5.4 - System Administrator Use Case Diagram]**  
*A UML use case diagram showing the Administrator actor with connections to:*
- *All Staff use cases (through inheritance/generalization)*
- *Create New Menu Items*
- *Edit Menu Items (name, description, price, category, image)*
- *Delete Menu Items*
- *Upload Menu Item Images*
- *Set Dynamic Pricing*
- *Configure Loyalty Points Rules*
- *View Analytics Dashboard*
- *Generate Reports (daily sales, popular items, revenue trends)*
- *View All Users*
- *Deactivate User Accounts*
- *Adjust User Loyalty Points (manual corrections)*
- *Configure System Settings*
- *Manage Staff Accounts*

### Primary Administrator Use Cases

**UC9: Manage Menu Items** - Administrators have full CRUD operations on menu catalog. Creating items requires name, description, base price, category assignment, and image upload. Editing allows price adjustments, description updates, category changes, and image replacements. Deleting items performs soft delete (marks inactive) rather than hard delete to preserve historical order data referencing those items.

**UC10: Configure Loyalty Program** - Administrators adjust loyalty program parameters including points earning rate (default 1 point per 100 KES), redemption value (default 100 points = 50 KES), points expiration period if desired, bonus point multiplier events (double points day), and minimum purchase amount for points eligibility.

**UC11: View Analytics** - Administrators access comprehensive dashboards showing key performance indicators: total daily/weekly/monthly revenue, number of orders by time period, average order value, most popular menu items ranked by quantity sold, peak order hours for staffing optimization, loyalty program participation rate, and customer retention metrics.

## External System Use Cases

**[DIAGRAM PLACEHOLDER: Figure 5.5 - External Systems Integration Use Case Diagram]**  
*A UML use case diagram showing interactions between the system and external actors:*
- *M-Pesa Payment Gateway: Process Payment, Send Payment Callback, Verify Transaction*
- *Firebase Authentication: Authenticate User, Verify Email, Reset Password*  
- *Firebase Cloud Messaging: Send Push Notification, Deliver Notification*
- *Include relationships showing dependencies*

### External Integration Use Cases

**UC12: Process M-Pesa Payment** - When student confirms order, system generates payment request with transaction reference, amount, and customer phone number. Cloud Functions call M-Pesa Daraja API OAuth endpoint to obtain access token, then submit STK Push request. M-Pesa sends USSD payment prompt to student's phone. Student enters M-Pesa PIN authorizing payment. M-Pesa processes transaction and sends callback to system webhook with result code, transaction ID, and confirmation details.

**UC13: Real-time Notifications** - When staff update order status, Cloud Function triggers Firebase Cloud Messaging to send push notification to student's registered device. Notification includes order number, new status, and estimated pickup time. Student app receives notification even when backgrounded or closed, displaying system notification with sound/vibration based on device settings.

---

**Word Count**: ~620 words  
**Status**: ✅ Complete
